buildscript {
    repositories {
        jcenter()
    }

    dependencies {
        classpath 'com.bmuschko:gradle-docker-plugin:3.3.2'
    }
}

apply plugin: 'java'
apply plugin: 'application'
apply plugin: 'com.bmuschko.docker-java-application'

group = 'mjunx'
applicationName = 'example-java'
version = '1.0'
sourceCompatibility = 1.8
targetCompatibility = 1.8

repositories {
    mavenCentral()
}

dependencies {
    compile 'com.sparkjava:spark-core:2.7.2'
}

dockerDistTar {
    instruction {
        'RUN apt-get update && apt-get upgrade -y && apt-get install -y openjdk-8-jre-headless && rm -rf /var/lib/apt/lists/*'
    }
}

mainClassName = 'org.musigma.example.java.Main'

docker {
    javaApplication {
        baseImage = 'debian:latest'
        maintainer = 'Matt Sicker "boards@gmail.com"'
        ports = [4567]
    }
}

